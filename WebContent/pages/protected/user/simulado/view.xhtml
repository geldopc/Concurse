<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

	<ui:composition template="/templates/template-master.xhtml">
			<ui:define name="pageTitle">Simulado</ui:define>
			<ui:define name="pageHeader">Simulado</ui:define>
			<ui:define name="center">
			 	<p:fieldset legend="Simulado">
					<h:form id="formSimulado">
						<p:panelGrid columns="3" style="width: 100%">
							<h:outputLabel 
								value="ASSUNTO:" 
								for="assunto" 
								style="font-weight: bold;"/>
							<p:selectOneMenu 
								id="assuntoCombo" 
								required="true"
								value="#{simuladoAction.assunto}" 
								style="width:260px">  
				                <f:selectItem 
				                	itemLabel="Selecione..." 
				                	itemValue=""/>  
				                <f:selectItems 
				                	value="#{simuladoAction.listAssuntos}"/>
				                <f:converter 
				                	converterId="assuntoConverter"
				                	for="assuntoCombo"/>   
				            </p:selectOneMenu>
				            <p:commandButton 
								id="btGerarSimulado" 
								value="Gerar Simulado"
								action="#{simuladoAction.gerarSimulado()}"
								icon="ui-icon-circle-check"
								style="font-weight: bold;"
								update="formSimulado, questoesSimulado, painelQuestoes"/>
						</p:panelGrid> 
						<p:panel 
							id="painelQuestoes" 
							header="Questões" 
							rendered="#{simuladoAction.renderizaSimulado()}">
							<p:accordionPanel 
								id="questoesSimulado"
								rendered="true"
								value="#{simuladoAction.questoes}" 
								var="q" 
								multiple="true">
								<p:tab title="#{q.numQuestao}º Questão">
									<p:dataTable 
										id="idRespostas"
										var="row" 
										value="#{q.respostaModel}"
										selection="#{q.respostaCorreta}" > 
										<f:facet name="header">  
								            #{q.pergunta} 
								        </f:facet>  
										<p:column 
											headerText="Resposta Correta"
											selectionMode="single" 
											style="width: 2%"/>
								        <p:column headerText="Resposta">  
								            <h:outputText value="#{row.resposta}" />  
								        </p:column>  
								        
								    </p:dataTable>
									
								</p:tab>
							</p:accordionPanel>
							<p:commandButton 
								id="btGravarSimulado" 
								value="Gravar Simulado"
								action="#{simuladoAction.gerarSimulado()}"
								icon="ui-icon-circle-check"
								style="font-weight: bold;"
								update="formSimulado"/>
						</p:panel>
					</h:form>
				</p:fieldset>
			</ui:define>
	</ui:composition>
</html>